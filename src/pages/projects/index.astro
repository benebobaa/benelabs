---
import BaseLayout from '../../layouts/BaseLayout.astro';
import TagList from '../../components/TagList.astro';
import { formatDate } from '../../lib/format';
import { getProjects } from '../../lib/sanity';

const projects = await getProjects();
---

<BaseLayout
  title="Projects | Benelabs"
  description="Case studies in AI, cloud, backend engineering, and system modernization."
>
  <section class="site-container section-block" data-analytics-list="projects">
    <div class="space-y-3">
      <p class="eyebrow">Projects</p>
      <h1 class="text-[1.8rem] md:text-4xl">Case studies & platforms</h1>
      <p class="text-base text-pretty md:text-lg">
        A sample of engagements focused on scalable systems, automation, and delivery excellence.
      </p>
    </div>
    <div class="full-bleed-mobile mt-5 grid gap-6 md:grid-cols-2">
      {projects.map((project) => (
        <article class="card-surface card-link card-pad flex h-full flex-col gap-4">
          <div class="flex items-center justify-between text-xs text-[var(--color-ink-subtle)]">
            <span>{formatDate(project.publishedAt)}</span>
            <span>Case study</span>
          </div>
          <div class="space-y-3">
            <h2 class="text-xl md:text-2xl">
              <a class="hover:text-[var(--color-accent)]" href={`/projects/${project.slug}`}>
                {project.title}
              </a>
            </h2>
            <p class="text-sm text-[var(--color-ink-muted)]">{project.summary}</p>
          </div>
          <TagList tags={project.techStack ?? []} />
          <a
            class="inline-flex min-h-[44px] items-center text-sm font-semibold text-[var(--color-accent)]"
            href={`/projects/${project.slug}`}
          >
            View project ->
          </a>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
