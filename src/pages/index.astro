---
import BaseLayout from '../layouts/BaseLayout.astro';
import TagList from '../components/TagList.astro';
import { formatDate } from '../lib/format';
import { getBlogPosts, getProjects } from '../lib/sanity';

const posts = (await getBlogPosts()).slice(0, 2);
const projects = (await getProjects()).slice(0, 2);
---

<BaseLayout
  title="Benelabs - Software Studio"
  description="Benelabs builds scalable AI, cloud, and backend solutions for tomorrow's challenges."
>
  <section class="site-container pt-10">
    <div class="grid items-center gap-10 lg:grid-cols-[1.1fr_0.9fr]">
      <div class="space-y-6 animate-rise">
        <p class="eyebrow">Benelabs.tech</p>
        <h1 class="text-[1.8rem] leading-tight text-balance md:text-5xl">
          Building scalable AI, cloud, and backend solutions.
        </h1>
        <p class="text-base text-pretty md:text-lg">
          We help teams design resilient platforms, automate cloud delivery, and ship reliable AI and mobile
          experiences.
        </p>
        <div class="flex flex-wrap gap-3">
          <a class="button-primary" href="/projects" data-analytics="cta" data-label="home_explore_projects">
            Explore projects
          </a>
          <a class="button-ghost" href="/contact" data-analytics="cta" data-label="home_book_consultation">
            Book a consultation
          </a>
        </div>
        <div class="flex flex-wrap gap-2">
          <span class="tag-chip">Golang</span>
          <span class="tag-chip">Kubernetes</span>
          <span class="tag-chip">LLM automation</span>
        </div>
      </div>
      <div class="card-surface card-pad space-y-5 animate-rise animate-rise-delay-1 lg:p-8">
        <div class="flex items-center justify-between">
          <span class="eyebrow">Studio focus</span>
          <span class="text-xs text-[var(--color-ink-subtle)]">2025</span>
        </div>
        <h2 class="text-xl md:text-2xl">Engineering depth, practical delivery.</h2>
        <p class="text-sm text-[var(--color-ink-muted)]">
          We build backend platforms, cloud automation, and AI pipelines that stay maintainable.
        </p>
        <ul class="space-y-4 text-sm text-[var(--color-ink-muted)]">
          <li class="flex items-start gap-3">
            <span class="tag-chip">01</span>
            <div>
              <div class="font-semibold text-[var(--color-ink)]">Backend engineering</div>
              <div>Microservices, REST and gRPC APIs, and scalable data flows.</div>
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="tag-chip">02</span>
            <div>
              <div class="font-semibold text-[var(--color-ink)]">Cloud and DevOps automation</div>
              <div>Kubernetes, GitOps pipelines, and self-healing infrastructure.</div>
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="tag-chip">03</span>
            <div>
              <div class="font-semibold text-[var(--color-ink)]">AI and LLM engineering</div>
              <div>RAG pipelines, multi-agent systems, and intelligent automation.</div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <section class="site-container section-block">
    <div class="full-bleed-mobile grid gap-6 md:grid-cols-3">
      <div class="card-surface card-link card-pad space-y-3 animate-rise">
        <p class="eyebrow">Mobile</p>
        <h3 class="text-xl">Cross-platform apps</h3>
        <p class="text-sm text-[var(--color-ink-muted)]">
          Flutter builds with clean architecture, realtime sync, and reliable UX.
        </p>
      </div>
      <div class="card-surface card-link card-pad space-y-3 animate-rise animate-rise-delay-1">
        <p class="eyebrow">Modernization</p>
        <h3 class="text-xl">Legacy to microservices</h3>
        <p class="text-sm text-[var(--color-ink-muted)]">
          Refactor monoliths into concurrent services with clear service boundaries.
        </p>
      </div>
      <div class="card-surface card-link card-pad space-y-3 animate-rise animate-rise-delay-2">
        <p class="eyebrow">Consulting</p>
        <h3 class="text-xl">Architecture guidance</h3>
        <p class="text-sm text-[var(--color-ink-muted)]">
          Roadmaps, SLA optimization, and delivery guidance for complex systems.
        </p>
      </div>
    </div>
  </section>

  <section class="site-container section-block">
    <div class="flex flex-wrap items-end justify-between gap-4">
      <div class="space-y-2">
        <p class="eyebrow">Selected projects</p>
        <h2 class="text-2xl md:text-3xl">Recent engineering work</h2>
      </div>
    </div>
    <div class="full-bleed-mobile mt-5 grid gap-6 md:grid-cols-2">
      {projects.map((project) => (
        <article class="card-surface card-link card-pad flex h-full flex-col gap-4">
          <div class="flex items-center justify-between">
            <span class="eyebrow">Project</span>
            <span class="text-xs text-[var(--color-ink-subtle)]">
              {formatDate(project.publishedAt)}
            </span>
          </div>
          <div class="space-y-3">
            <h3 class="text-xl md:text-2xl">{project.title}</h3>
            <p class="text-sm text-[var(--color-ink-muted)]">{project.summary}</p>
          </div>
          <TagList tags={project.techStack ?? []} />
          <a
            class="mt-auto inline-flex min-h-[44px] items-center text-sm font-semibold text-[var(--color-accent)]"
            href={`/projects/${project.slug}`}
          >
            View project ->
          </a>
        </article>
      ))}
    </div>
    <div class="mt-5 flex md:justify-end">
      <a
        class="button-ghost w-full justify-center md:w-auto"
        href="/projects"
        data-analytics="cta"
        data-label="home_view_projects"
      >
        View all projects
      </a>
    </div>
  </section>

  <section class="site-container section-block">
    <div class="flex flex-wrap items-end justify-between gap-4">
      <div class="space-y-2">
        <p class="eyebrow">Latest writing</p>
        <h2 class="text-2xl md:text-3xl">From the engineering journal</h2>
      </div>
    </div>
    <div class="full-bleed-mobile mt-5 grid gap-6 md:grid-cols-2">
      {posts.map((post) => (
        <article class="card-surface card-link card-pad flex h-full flex-col gap-4">
          <div class="flex items-center justify-between">
            <span class="eyebrow">Journal</span>
            <span class="text-xs text-[var(--color-ink-subtle)]">{formatDate(post.publishedAt)}</span>
          </div>
          <div class="space-y-3">
            <h3 class="text-xl md:text-2xl">{post.title}</h3>
            <p class="text-sm text-[var(--color-ink-muted)]">{post.excerpt}</p>
          </div>
          <TagList tags={post.tags ?? []} />
          <a
            class="mt-auto inline-flex min-h-[44px] items-center text-sm font-semibold text-[var(--color-accent)]"
            href={`/blog/${post.slug}`}
          >
            Read article ->
          </a>
        </article>
      ))}
    </div>
    <div class="mt-5 flex md:justify-end">
      <a
        class="button-ghost w-full justify-center md:w-auto"
        href="/blog"
        data-analytics="cta"
        data-label="home_view_blog"
      >
        View all posts
      </a>
    </div>
  </section>

  <section class="site-container section-block">
    <div class="card-surface flex flex-col gap-6 p-8 md:flex-row md:items-center md:justify-between">
      <div class="space-y-2">
        <p class="eyebrow">Next steps</p>
        <h2 class="text-2xl md:text-3xl">Ready to build something impactful?</h2>
        <p class="text-sm text-[var(--color-ink-muted)]">
          Let us discuss your project and map the next milestone with a free consultation.
        </p>
      </div>
      <a class="button-primary" href="/contact" data-analytics="cta" data-label="home_book_call">
        Book a free consultation
      </a>
    </div>
  </section>
</BaseLayout>
